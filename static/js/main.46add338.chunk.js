(this["webpackJsonpreward-store-juan-esteban-carmona"]=this["webpackJsonpreward-store-juan-esteban-carmona"]||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),s=a.n(c),r=a(8),i=a.n(r),o=(a(21),a(22),a.p+"static/media/header-x1.b6f067c6.png"),l=function(){return Object(n.jsxs)("div",{className:"bannerContainer",children:[Object(n.jsx)("span",{className:"bannerCategory",children:"Electronics"}),Object(n.jsx)("img",{className:"bannerLogo",src:o})]})},u=a.p+"static/media/aerolab-logo.0a8fb170.svg",j=a(2),d=a.p+"static/media/coin.26de1690.svg",p=a(3),b=a.n(p),m=a(7),O=function(){var e=Object(m.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h=Object(c.createContext)(),v=function(e){var t=Object(c.useState)({}),a=Object(j.a)(t,2),s=a[0],r=a[1],i=e.children;function o(){return l.apply(this,arguments)}function l(){return(l=Object(m.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/user/me",t={method:"GET",headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFhYzljZGI5NTIzZTAwMjA3ZTFmYzIiLCJpYXQiOjE2MDUwMjgzMDF9.AmLe0RxgByiXoIvSND0TFzRmZoN1DZQXFh2XAWt21bE"})},e.next=4,O("https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/user/me",t);case 4:return a=e.sent,r(a),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){o()}),[]),Object(n.jsx)(h.Provider,{value:[s,r,o],children:i})},x=a(4),g=a.p+"static/media/minus.fc16623d.svg",f=a.p+"static/media/plus.f201b306.svg",y=function(e){var t=Object(c.useState)(1e3),a=Object(j.a)(t,2),s=a[0],r=a[1],i=[1e3,5e3,7500],o=Object(c.useContext)(h),l=Object(j.a)(o,2),u=l[0],d=l[1],p=function(){var t=Object(m.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/user/points",a={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFhYzljZGI5NTIzZTAwMjA3ZTFmYzIiLCJpYXQiOjE2MDUwMjgzMDF9.AmLe0RxgByiXoIvSND0TFzRmZoN1DZQXFh2XAWt21bE"}),body:JSON.stringify({amount:s})},t.next=4,O("https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/user/points",a);case 4:n=t.sent,d(Object(x.a)(Object(x.a)({},u),{},{points:n["New Points"]})),alert(n.message),e.close();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"addCoinContainer",children:[Object(n.jsxs)("div",{className:"addCoinInput",children:[Object(n.jsx)("div",{className:"addCoinInputNumber",children:s}),Object(n.jsxs)("div",{className:"addCoinButtonSet",children:[Object(n.jsx)("div",{className:"addCoinButton",onClick:function(){var e=i.findIndex((function(e){return e==s}));e-1<0||r(i[e-1])},children:Object(n.jsx)("img",{src:g})}),Object(n.jsx)("div",{className:"addCoinButton",onClick:function(){var e=i.findIndex((function(e){return e==s}));e+1>=i.length||r(i[e+1])},children:Object(n.jsx)("img",{src:f})})]})]}),Object(n.jsx)("button",{className:"submitButton",onClick:p,children:"Add amount"})]})},N=a.p+"static/media/squarex.ef4267e4.svg",C=function(e){var t=e.properties,a=t.visible,c=t.title,s=t.body;return Object(n.jsxs)("div",{className:a?"menuModalDialogContainer":"hidden",children:[Object(n.jsxs)("div",{className:"headerMenu",children:[Object(n.jsx)("div",{className:"headerTitle",children:c}),Object(n.jsx)("div",{className:"headerToolbar",children:Object(n.jsx)("img",{src:N,onClick:e.close})})]}),s]})},I=a.p+"static/media/buy-blue.c5c4f01c.svg",A=function(e){var t=e.img,a=e.name,c=e.date;return Object(n.jsxs)("div",{className:"historyItemContainer",children:[Object(n.jsx)("div",{className:"historyName",children:Object(n.jsx)("span",{children:a})}),Object(n.jsx)("div",{className:"historyImage",children:Object(n.jsx)("img",{src:t})}),Object(n.jsx)("div",{className:"historyDate",children:Object(n.jsx)("span",{children:c})})]})},T=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){var e={method:"GET",headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFhYzljZGI5NTIzZTAwMjA3ZTFmYzIiLCJpYXQiOjE2MDUwMjgzMDF9.AmLe0RxgByiXoIvSND0TFzRmZoN1DZQXFh2XAWt21bE"})};fetch("https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/user/history",e).then((function(e){return e.json()})).then((function(e){s(e)}))})),Object(n.jsx)("div",{className:"historyContainer",children:a.map((function(e){return Object(n.jsx)(A,{date:e.createDate,img:e.img.url,name:e.name})}))})},z=function(){var e=Object(c.useContext)(h),t=Object(j.a)(e,3),a=t[0],s=(t[1],t[2],Object(c.useState)(!1)),r=Object(j.a)(s,2),i=r[0],o=r[1],l=Object(c.useState)({visible:!1,title:"",body:Object(n.jsx)("div",{})}),u=Object(j.a)(l,2),p=u[0],b=u[1],m=function(){b({visible:!1}),document.querySelector(".modal").style.display="none"};return Object(n.jsxs)("div",{className:"profileContainer",children:[Object(n.jsx)("span",{className:"profileName",onClick:function(){o(!i)},children:a.name}),Object(n.jsxs)("div",{className:"pointCounterContainer",children:[Object(n.jsx)("span",{className:"pointCounterText",children:a.points}),Object(n.jsx)("img",{className:"pointCounterIcon",src:d})]}),i?Object(n.jsxs)("ul",{className:"profileToogleMenu",children:[Object(n.jsx)("li",{className:"profileToogleItem",onClick:function(){b({body:Object(n.jsx)(T,{close:m}),visible:!0,title:"Redeem History"}),document.querySelector(".modal").style.display="grid"},children:"Redeem history"}),Object(n.jsx)("li",{className:"profileToogleItem",onClick:function(){b({body:Object(n.jsx)(y,{close:m}),title:"Add Points",visible:!0}),document.querySelector(".modal").style.display="grid"},children:"Add points"})]}):"",Object(n.jsx)(C,{properties:p,close:m})]})},S=function(){return Object(n.jsxs)("div",{className:"headerContainer",children:[Object(n.jsx)("img",{className:"headerLogo",src:u}),Object(n.jsx)(z,{})]})},w=a(10),Z=function(e){var t=e.category,a=e.cost,s=e.img,r=e.name,i=e.id,o=e.redeem,l=Object(c.useState)(!1),u=Object(j.a)(l,2),p=u[0],b=u[1],m=Object(c.useRef)(),O=Object(c.useContext)(h),v=Object(j.a)(O,3),x=v[0],g=(v[1],v[2],function(){b(!0)}),f=function(){b(!1)};Object(c.useEffect)((function(){return m.current.addEventListener("mousemove",g),m.current.addEventListener("mouseleave",f),function(){null!=m&&null!=m.current&&(m.current.removeEventListener("mousemove",g),m.current.removeEventListener("mouseleave",f))}}),[p]);return Object(n.jsxs)("div",{className:"productItemContainer",ref:m,children:[p?x.points>a?Object(n.jsxs)("div",{className:"hoverCanBuy",children:[Object(n.jsxs)("label",{className:"remaingPoints",children:["Remainig points ",x.points-a]}),Object(n.jsx)("button",{className:"buttonCanBuy",onClick:o(i),children:"Redeem Now"})]}):Object(n.jsxs)("div",{className:"hoverCantBuy",children:[Object(n.jsxs)("label",{className:"remaingPoints",children:["Product cost ",a]}),Object(n.jsx)("button",{className:"buttonCanBuy",children:"Cant redeem"})]}):"",x.points>a?Object(n.jsx)("div",{className:"productBuyIcon",children:Object(n.jsx)("img",{src:I})}):Object(n.jsxs)("div",{className:"productNeedCoin",children:["You need ",a-x.points,Object(n.jsx)("img",{className:"pointCounterIcon",src:d})]}),Object(n.jsx)("div",{className:"productImage",children:Object(n.jsx)("img",{src:s})}),Object(n.jsx)("div",{className:"productSeparator"}),Object(n.jsx)("div",{className:"productCategory",children:Object(n.jsx)("span",{children:t})}),Object(n.jsx)("div",{className:"productName",children:Object(n.jsx)("span",{children:r})})]})},J=a(43),M=function(e){var t=e.properties,a=t.visible,c=t.result,s=t.message,r=t.title;return Object(n.jsxs)("div",{className:a?"modalAlert":"modalAlertHidden",children:[Object(n.jsx)("div",{className:c?"successAlertTitle":"errorAlertTitle",children:r}),Object(n.jsxs)("div",{className:c?"successAlertBody":"errorAlertBody",children:[Object(n.jsx)("div",{className:c?"successAlertText":"errorAlertText",children:s}),Object(n.jsx)("button",{className:c?"successAlertButton":"errorAlertButton",onClick:e.close,children:"Close"})]})]})},E=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)({category:"-1",cost:""}),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useContext)(h),d=Object(j.a)(u,3),p=(d[0],d[1],d[2]),v=Object(c.useState)({visible:!1,result:!0,title:"",message:""}),g=Object(j.a)(v,2),f=g[0],y=g[1],N=Object(c.useState)({paginatedProducts:[],paginationCounter:0,pageSize:16,page:1}),C=Object(j.a)(N,2),I=C[0],A=C[1],T=function(e,t,a){return 0==e.lenght?e:e.slice((a-1)*t,a*t)},z=function(e){return function(){var t=Object(m.a)(b.a.mark((function t(a){var n,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/redeem",n={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFhYzljZGI5NTIzZTAwMjA3ZTFmYzIiLCJpYXQiOjE2MDUwMjgzMDF9.AmLe0RxgByiXoIvSND0TFzRmZoN1DZQXFh2XAWt21bE"}),body:JSON.stringify({productId:e})},t.next=4,O("https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/redeem",n);case 4:c=t.sent,document.querySelector(".modal").style.display="grid",c.message&&(y({visible:!0,result:!0,title:"Success",message:c.message}),p()),c.error&&y({visible:!0,result:!1,title:"Error",message:c.error});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){var t=a.filter(E,o),n=T(t,I.pageSize,I.page);A(Object(x.a)(Object(x.a)({},I),{},{page:1,paginationCounter:Math.floor(t.length/I.pageSize),paginatedProducts:n}))};function E(e){var t=this;return Object.keys(this).every((function(n){switch(n){case"category":return"-1"===t[n]?e[n]:e[n]==t[n];case"cost":return""===t[n]?e[n]:e[n]==t[n];default:return a}}))}return Object(c.useEffect)(Object(m.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/products",t={method:"GET",headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFhYzljZGI5NTIzZTAwMjA3ZTFmYzIiLCJpYXQiOjE2MDUwMjgzMDF9.AmLe0RxgByiXoIvSND0TFzRmZoN1DZQXFh2XAWt21bE"})},e.next=4,O("https://private-anon-44244cc0a3-aerolabchallenge.apiary-proxy.com/products",t);case 4:a=e.sent,s(a),n=T(a,I.pageSize,I.page),A(Object(x.a)(Object(x.a)({},I),{},{paginationCounter:Math.floor(a.length/I.pageSize),paginatedProducts:n}));case 8:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(e){S(e)}),[o]),Object(n.jsxs)("div",{className:"productsContainer",children:[Object(n.jsxs)("div",{className:"selectFilter",children:[Object(n.jsxs)("select",{name:"category",onChange:function(e){var t=e.target.value;l(Object(x.a)(Object(x.a)({},o),{},{category:t})),S(t)},children:[Object(n.jsx)("option",{value:"-1",selected:!0,children:"Select a filter"}),["Phones","Gaming","Laptops","Cameras","Audio","Monitors & TV","Drones","Phone Accessories","Smart Home","PC Accessories","Tablets & E-readers","PC Accesories"].map((function(e){return Object(n.jsx)("option",{value:e,children:e})}))]}),Object(n.jsx)("input",{placeholder:"Cost filter",name:"cost",onChange:function(e){var t=e.target.value;l(Object(x.a)(Object(x.a)({},o),{},{cost:t})),S(t)}})]}),Object(n.jsx)(M,{properties:f,close:function(){y({visible:!1,result:!0,title:"",message:""}),document.querySelector(".modal").style.display="none"}}),I.paginatedProducts.map((function(e){var t;return Object(n.jsx)(Z,(t={id:e._id,category:e.category,cost:e.cost,img:e.img.url,name:e.name},Object(w.a)(t,"cost",e.cost),Object(w.a)(t,"redeem",z),t),e._id)})),Object(n.jsx)(J.a,{color:"primary",className:"paginationC",count:I.paginationCounter,page:I.page,siblingCount:1,boundaryCount:1,onChange:function(e,t){var n=T(a,I.pageSize,t);A(Object(x.a)(Object(x.a)({},I),{},{page:t,paginatedProducts:n}))}})]})};var F=function(){var e=Object(c.useRef)();return Object(n.jsxs)(v,{children:[Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(S,{modal:e}),Object(n.jsx)(l,{}),Object(n.jsx)(E,{})]}),Object(n.jsx)("div",{className:"modal"})]})};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(F,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.46add338.chunk.js.map